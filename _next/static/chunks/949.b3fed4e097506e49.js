(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[949],{9949:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return v}});var l=t(5893),s=t(7294),i=t(3299),n=t(1761),o=t(2342),r=t.n(o),c=t(3804),d=t(3797),u=t(5890),m=t(1849),_=t.n(m),h=e=>{let{isOpen:a,onClose:t,onReauthenticate:o}=e,{currentUser:r}=(0,n.a)(),[d,u]=(0,s.useState)(""),[m,h]=(0,s.useState)("");return((0,s.useEffect)(()=>{r&&u(r.email||"")},[r]),(0,s.useEffect)(()=>(a?(document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden"):(document.documentElement.style.overflow="",document.body.style.overflow=""),()=>{document.documentElement.style.overflow="",document.body.style.overflow=""}),[a]),a)?(0,l.jsx)("div",{className:_().overlay,onClick:e=>{e.target===e.currentTarget&&t()},children:(0,l.jsxs)("div",{className:_().modal,children:[(0,l.jsx)("span",{onClick:t,className:_().close,children:(0,l.jsx)(c.nfZ,{})}),(0,l.jsx)("h3",{className:_().title,children:"Reauthenticate"}),(0,l.jsxs)("div",{className:_().field,children:[(0,l.jsx)("label",{className:_().label,children:"Current email:"}),(0,l.jsx)("input",{className:_().input,type:"email",value:d,onChange:e=>u(e.target.value)})]}),(0,l.jsxs)("div",{className:_().field,children:[(0,l.jsx)("label",{className:_().label,children:"Current password:"}),(0,l.jsx)("input",{className:_().input,type:"password",value:m,onChange:e=>h(e.target.value)})]}),(0,l.jsxs)("div",{className:_().buttons,children:[(0,l.jsx)("button",{className:_().button,onClick:()=>{o(i.w9.credential(d,m)),t()},children:"Submit"}),(0,l.jsx)("button",{className:_().button,onClick:t,children:"Cancel"})]})]})}):null},f=t(4173),p=t(2711),v=()=>{let{currentUser:e,updateDisplayName:a}=(0,n.a)(),[t,o]=(0,s.useState)((null==e?void 0:e.displayName)||""),[m,_]=(0,s.useState)((null==e?void 0:e.email)||""),[v,x]=(0,s.useState)(""),[w,b]=(0,s.useState)(!1),[N,y]=(0,s.useState)(!1),[j,E]=(0,s.useState)(!1),[g,P]=(0,s.useState)(!1);(0,s.useEffect)(()=>{j?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[j]);let C=async e=>{try{await (0,i.w$)(e),f.Am.success("Verification email sent to new email address. Please verify and try updating again.")}catch(e){f.Am.error("Error sending verification email. Please try again."),console.error("Error sending verification email: ",e)}},k=async()=>{if(e){P(!0);try{if(t&&t!==e.displayName&&(await (0,i.ck)(e,{displayName:t}),a(t)),m&&m!==e.email){await C(e),f.Am.info("Please verify the new email address before changing it."),P(!1);return}v&&await (0,i.gQ)(e,v),f.Am.success("Profile updated successfully!")}catch(e){S(e)}finally{P(!1)}}},S=e=>{"auth/requires-recent-login"===e.code?(E(!0),P(!1)):"auth/invalid-email"===e.code?f.Am.warn("Invalid email format."):"auth/email-already-in-use"===e.code?f.Am.warn("Email is already in use."):"auth/weak-password"===e.code?f.Am.warn("Password is too weak."):console.error("Error updating profile: ",e)},A=()=>t===(null==e?void 0:e.displayName)&&m===(null==e?void 0:e.email)&&""===v?(f.Am.warn("No changes to update"),!1):/\S+@\S+\.\S+/.test(m)?!v||!(v.length<6)||(f.Am.warn("Password should be at least 6 characters"),!1):(f.Am.warn("Please enter a valid email address"),!1),M=async a=>{if(e)try{await (0,i.aF)(e,a),E(!1),await k()}catch(e){f.Am.error("Reauthentication failed. Please try again.")}};return(0,l.jsxs)("div",{className:r().section,children:[g&&(0,l.jsx)(p.Z,{}),(0,l.jsxs)("div",{className:r().wrapper,children:[(0,l.jsxs)("div",{className:r().titleWrapper,children:[(0,l.jsx)("h3",{className:r().title,children:"Edit Profile"}),(0,l.jsxs)("div",{className:r().tooltip,onClick:()=>{b(e=>!e)},children:[w?(0,l.jsx)(d.u5Z,{className:r().icon}):(0,l.jsx)(c.Uf_,{className:r().icon}),(0,l.jsx)("span",{className:r().tooltipText,children:w?"Done":"Edit profile"})]})]}),w&&(0,l.jsxs)("form",{className:r().form,onSubmit:e=>{e.preventDefault(),A()&&(E(!1),k())},children:[(0,l.jsxs)("div",{className:r().field,children:[(0,l.jsx)("label",{className:r().label,children:"Name:"}),(0,l.jsx)("input",{className:r().input,type:"text",value:t,onChange:e=>o(e.target.value)})]}),(0,l.jsxs)("div",{className:r().field,children:[(0,l.jsx)("label",{className:r().label,children:"Email:"}),(0,l.jsx)("input",{className:r().input,type:"email",value:m,onChange:e=>_(e.target.value)})]}),(0,l.jsxs)("div",{className:r().field,children:[(0,l.jsx)("label",{className:r().label,children:"Password:"}),(0,l.jsx)("input",{className:r().input,type:N?"text":"password",value:v,onChange:e=>x(e.target.value)}),(0,l.jsx)("button",{type:"button",className:r().showPasswordBtn,onClick:()=>{y(e=>!e)},children:N?(0,l.jsx)(u.Y$A,{className:r().icon}):(0,l.jsx)(u.$ge,{className:r().icon})})]}),(0,l.jsx)("button",{className:r().btn,type:"submit",children:"Update"})]})]}),j&&(0,l.jsx)(h,{isOpen:j,onClose:()=>{E(!1)},onReauthenticate:M})]})}},1849:function(e){e.exports={overlay:"ReauthenticateModal_overlay__jZ1Tv",modal:"ReauthenticateModal_modal__S6xth",title:"ReauthenticateModal_title__Io1pt",buttons:"ReauthenticateModal_buttons__TMK5a",button:"ReauthenticateModal_button__T5cBW",close:"ReauthenticateModal_close__mIwk7",field:"ReauthenticateModal_field__hXkNb",label:"ReauthenticateModal_label__b5ul3",input:"ReauthenticateModal_input__xbbcQ"}},2342:function(e){e.exports={wrapper:"ProfileEdit_wrapper__C2K1G",title:"ProfileEdit_title__9_i_6",section:"ProfileEdit_section__uCUQF",form:"ProfileEdit_form__F3_nW",field:"ProfileEdit_field__MIr4A",input:"ProfileEdit_input__M_kkO",btn:"ProfileEdit_btn__71I6d",titleWrapper:"ProfileEdit_titleWrapper__A0jEF",tooltip:"ProfileEdit_tooltip__CSW0U",tooltipText:"ProfileEdit_tooltipText__vol27",showPasswordBtn:"ProfileEdit_showPasswordBtn__Mk78w",icon:"ProfileEdit_icon__cqTOy"}}}]);